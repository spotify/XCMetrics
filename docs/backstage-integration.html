<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Backstage Integration  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css">
    <link rel="stylesheet" type="text/css" href="css/highlight.css">
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1.0">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Backstage Integration  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p>
          <a href="index.html"> Docs</a>
          <span class="no-mobile"> (100% documented)</span>
        </p>
    
        <p class="header-right">
          <a href="https://github.com/spotify/XCMetrics">
            <img src="img/gh.png" alt="GitHub">
            <span class="no-mobile">View on GitHub</span>
          </a>
        </p>
    
      </div>
    </header>
    <div id="breadcrumbs-container">
      <div class="content-wrapper">
        <p id="breadcrumbs">
          <span class="no-mobile">
            <a href="index.html"> Reference</a>
            <img id="carat" src="img/carat.png" alt="">
          </span>
          Backstage Integration  Reference
        </p>
      </div>
    </div>
    <div class="wrapper">
      <div class="article-wrapper">
        <article class="main-content">
          <section>
            <section class="section">
              
              <h1 id="backstage-integration" class="heading">Backstage Integration</h1>

<p>The XCMetrics Backstage plugin offers a great way to visually analyze and inspect
the metrics collected by XCMetrics. To use it, simply
<a href="https://github.com/backstage/backstage/tree/master/plugins/xcmetrics">install the plugin</a>
to your instance of Backstage and navigate to <code>https://&lt;your-backstage-url&gt;/xcmetrics</code>.</p>
<h2 id="turn-on-the-scheduled-jobs" class="heading">Turn on the Scheduled Jobs</h2>

<p>The Backstage plugin needs aggregated data that is computed every day. To do this, we are using Vapor’s Scheduled Jobs support and you will need to enable it in your Backend deployment.</p>

<p>For doing that, you need to:</p>

<ol>
<li>Start the backend with the <code>--scheduled</code> flags.</li>
<li>Pass the Environment Variable <code>XCMETRICS_SCHEDULE_STATISTICS_JOBS</code> with the value “1”:</li>
</ol>

<p>Example:</p>
<pre class="highlight shell"><code><span class="nv">XCMETRICS_SCHEDULE_STATISTICS_JOBS</span><span class="o">=</span>1 ./XCMetricsBackend queues --scheduled --env production
</code></pre>

<p>Is important to note, that is not recommended to start more than one instance of the backend with to run the scheduled jobs because the same job may run in all of them causing some issues in the data that is computed by them. You can see an example of how to configure a single instance with the responsibility to run the job in <a href="../DeploymentExamples/MultiInstances/xcmetrics-scheduled-jobs-deployment.yaml">this example</a>.</p>

            </section>
          </section>
        </article>
      </div>
      <div class="nav-wrapper">
        <nav class="nav-bottom">
          <ul class="nav-groups">
            <li class="nav-group-name">
              <a href="HTTP%20Endpoints.html">HTTP Endpoints</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Structs/BuildController.html">BuildController</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/JobLogController.html">JobLogController</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/UploadMetricsController.html">UploadMetricsController</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/StatisticsController.html">StatisticsController</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Other%20Guides.html">Other Guides</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="backstage-integration.html">Backstage Integration</a>
                </li>
                <li class="nav-group-task">
                  <a href="getting-started.html">Getting Started</a>
                </li>
                <li class="nav-group-task">
                  <a href="how-to-deploy-backend.html">How to Deploy Backend</a>
                </li>
                <li class="nav-group-task">
                  <a href="log-management-deep-dive.html">Log Management Deep Dive</a>
                </li>
                <li class="nav-group-task">
                  <a href="run-the-backend-locally.html">Run the Backend Locally</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Other%20Classes.html">Other Classes</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Classes/Build.html">Build</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/BuildError.html">BuildError</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/BuildHost.html">BuildHost</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/BuildMetadata.html">BuildMetadata</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/BuildWarning.html">BuildWarning</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/DayBuildTime.html">DayBuildTime</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/DayCount.html">DayCount</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/JobLogEntry.html">JobLogEntry</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Classes.html#/s:15XCMetricsClient27MetricsPublisherServiceHTTPC">MetricsPublisherServiceHTTP</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/Step.html">Step</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/Target.html">Target</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/XCMetricsConfiguration.html">XCMetricsConfiguration</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Other%20Extensions.html">Other Extensions</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Extensions/BuildHost.html">BuildHost</a>
                </li>
                <li class="nav-group-task">
                  <a href="Extensions/BuildMetadata.html">BuildMetadata</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Extensions.html#/s:19XCMetricsBackendLib9JSONValueO">JSONValue</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Extensions.html#/s:15XCMetricsClient21MetricsUploaderEffectO">MetricsUploaderEffect</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Extensions.html#/s:15XCMetricsClient20MetricsUploaderEventO">MetricsUploaderEvent</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Extensions.html#/s:15XCMetricsClient20MetricsUploaderModelV">MetricsUploaderModel</a>
                </li>
                <li class="nav-group-task">
                  <a href="Extensions/RepositoryError.html">RepositoryError</a>
                </li>
                <li class="nav-group-task">
                  <a href="Extensions/String.html">String</a>
                </li>
                <li class="nav-group-task">
                  <a href="Extensions/XcodeVersion.html">XcodeVersion</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Other%20Functions.html">Other Functions</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Other%20Functions.html#/s:19XCMetricsBackendLib9configureyy5Vapor11ApplicationCKF">configure(_:)</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Other%20Protocols.html">Other Protocols</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Protocols/DayData.html">DayData</a>
                </li>
                <li class="nav-group-task">
                  <a href="Protocols/StatisticsRepository.html">StatisticsRepository</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Other%20Structs.html">Other Structures</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Other%20Structs.html#/s:19XCMetricsBackendLib13BuildResponseV">BuildResponse</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Structs.html#/s:19XCMetricsBackendLib17BuildStatusResultV">BuildStatusResult</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Structs.html#/s:19XCMetricsBackendLib15ChartTimeSeriesV">ChartTimeSeries</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Structs.html#/s:19XCMetricsBackendLib12JobDashboardV">JobDashboard</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/MetricsUploadRequest.html">MetricsUploadRequest</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/XCMetrics.html">XCMetrics</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/XCMetricsPlugin.html">XCMetricsPlugin</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Other%20Typealiases.html">Other Type Aliases</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient5Builda">Build</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient9BuildHosta">BuildHost</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient13BuildMetadataa">BuildMetadata</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient10ErrorBuilda">ErrorBuild</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient13FunctionBuilda">FunctionBuild</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient9NoteBuilda">NoteBuild</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient9StepBuilda">StepBuild</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient19SwiftTypeCheckBuilda">SwiftTypeCheckBuild</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient11TargetBuilda">TargetBuild</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient25UploadBuildMetricsRequesta">UploadBuildMetricsRequest</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient12WarningBuilda">WarningBuild</a>
                </li>
                <li class="nav-group-task">
                  <a href="Other%20Typealiases.html#/s:15XCMetricsClient12XcodeVersiona">XcodeVersion</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
      <div class="footer-wrapper">
        <section id="footer">
          <p>© 2024 <a class="link" href="" target="_blank" rel="external noopener">Spotify</a>. All rights reserved. (Last updated: 2024-01-10)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.4</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </div>
    </div>
  </body>
</html>
